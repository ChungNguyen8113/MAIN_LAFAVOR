<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        
        <title>Account</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="/img/hinh/favicon_io/favicon.ico"/>
        <!--Google Font-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;500;700&display=swap" rel="stylesheet">

        <!-- Bootstrap icons-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link rel="stylesheet" href="../css/style1.css" type="text/css">
        <link rel="stylesheet" href="../css/styleLogin.css" type="text/css">

        <!--Script-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </head>

<body>
    <!-- User Section Begin -->
    <section class="user">

        <div class="row">
            <div class="form col-md-6" style="padding: 30px;">
                <div class="wrapper">
                    <div class="title-text">
                        <div class="title login">
                            Đăng nhập
                            <p id="inform"></p>
                        </div>
                        <div class="title signup">
                            Đăng ký
                        </div>
                    </div>
                    <div class="form-container">
                        <div class="slide-controls">
                            <input type="radio" name="slide" id="login" checked onclick="turnLogin()">
                            <input type="radio" name="slide" id="signup" onclick="turnSignup()">
                            <label for="login" class="slide login">Đăng nhập</label>
                            <label for="signup" class="slide signup">Đăng ký</label>
                            <div class="slider-tab"></div>
                        </div>
                        <div class="form-inner">
                            <form action="#" class="login">
                                <div class="field">
                                    <input type="email" id="emailSignIn" name="emailSignIn" placeholder="Email" required>
                                </div>
                                <div class="field">
                                    <input type="password" id="pwdSignIn" name="passwordSignIn" placeholder="Mật khẩu" required>
                                </div>
                                <div class="pass-link" style="padding-top: 25px;">
                                    <span><input type="checkbox"> Nhớ mật khẩu</span>
                                    <span style="padding-left: 35%;"><a href="#">Quên mật khẩu?</a></span>
                                </div>
                                <div class="field btn">
                                    <div class="btn-layer" id="signIn">Đăng nhập</div>

                                </div>
                                <div class="signup-link">
                                    <h6>Hoặc </h6>
                                    <div class="bicolor bisize"><i class="bi bi-facebook"></i> &nbsp; <i class="bi bi-google"></i></div>                                    
                                </div>
                                <div class="signup-link">
                                    Chưa có tài khoản? <a href="">Đăng ký ngay</a>
                                </div>
                            </form>
                            <form action="#" class="signup">
                                <div class="field">
                                    <input type="text" id="username" name="username" placeholder="Tên đăng nhập" required>
                                </div>
                                <div class="field">
                                    <input type="email" id="email" name="email" placeholder="Email" required>
                                </div>
                                <div class="field">
                                    <input type="password" id="pwd" name="password" placeholder="Mật khẩu" required>
                                </div>
                                <div>&nbsp;</div>
                                <div class="field btn">
                                    <div class="btn-layer" id="signUp">Đăng ký</div>
                                </div>
                                <div class="signup-link">
                                    <h6>Hoặc </h6>
                                    <div class="bicolor bisize"><i class="bi bi-facebook"></i> &nbsp; <i class="bi bi-google"></i></div>                                    
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- User Section Begin -->

    <!-- Js Plugins -->
    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.nice-select.min.js"></script>
    <script src="../js/jquery.nicescroll.min.js"></script>
    <script src="../js/jquery.magnific-popup.min.js"></script>
    <script src="../js/jquery.countdown.min.js"></script>
    <script src="../js/jquery.slicknav.js"></script>
    <script src="../js/mixitup.min.js"></script>
    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script>
        const loginText = document.querySelector(".title-text .login");
        const loginForm = document.querySelector("form.login");
        const loginBtn = document.querySelector("label.login");
        const signupBtn = document.querySelector("label.signup");
        const signupLink = document.querySelector("form .signup-link a");

        function turnSignup() {
            loginForm.style.marginLeft = "-50%";
            loginText.style.marginLeft = "-50%";
        };

        function turnLogin() {
            loginForm.style.marginLeft = "0%";
            loginText.style.marginLeft = "0%";
        };
        signupLink.onclick = (() => {
            signupBtn.click();
            return false;
        });
    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword,updateProfile} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"; 
        const firebaseConfig = { 
          apiKey: "AIzaSyCmPNlg7yOTCYjxigzPFDsu9-Un9XSJZSo",
          authDomain: "lafavor-2c8ce.firebaseapp.com",
          databaseURL: "https://lafavor-2c8ce-default-rtdb.firebaseio.com",
          projectId: "lafavor-2c8ce",
          storageBucket: "lafavor-2c8ce.appspot.com",
          messagingSenderId: "54093090557",
          appId: "1:54093090557:web:6befa6f1d5480464b8f894",
          measurementId: "G-WQZZWTVE7N"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);
        const auth = getAuth(app); 

        signUp.addEventListener('click', (e) =>{ var email = document.getElementById("email").value.trim();
        var password = document.getElementById("pwd").value; 
        var username = document.getElementById("username").value; 
        createUserWithEmailAndPassword(auth, email, password) 
        .then((userCredential)=> { const user = userCredential.user; 
        set(ref(database,'users/'+ user.uid),{username:username,email:email});

        updateProfile(auth.currentUser, { displayName: username }); 
        document.getElementById(`inform`).innerHTML=`Đăng ký thành công! Mời bạn đăng nhập`;
        turnLogin(); }) .catch((error) => { const errorCode = error.code;
        const errorMessage = error.message; 
        alert(error.code); });}); 
        signIn.addEventListener('click', (e) =>{ var email = document.getElementById("emailSignIn").value.trim();
        var password = document.getElementById("pwdSignIn").value; 
        signInWithEmailAndPassword(auth,email, password) .then((userCredential)=> { 
            const user = userCredential.user; 
            if(user.displayName){localStorage.setItem('account',user.displayName)} 
            else{localStorage.setItem('account',user.email)} ;
        location.href='../index.html' }) .catch((error)=> { 
            const errorCode = error.code; 
            const errorMessage = error.message; alert(error.code); }); }); 
            auth.onAuthStateChanged((user)=> { if (user) { console.log(user) } else { } });
    
      </script>
</body>
</html>